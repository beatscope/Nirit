if(typeof(NIRIT)==="undefined"){console.log("NIRIT Core is required.")}NIRIT.Company=function(b,a){this.csrf_token=b;this.token=a;this.init()};NIRIT.Company.prototype.init=function(){var a=this;new NIRIT.Upload({field:"image",model:"Organization",token:this.csrf_token,width:626,height:192});new NIRIT.Upload({field:"logo",model:"Organization",token:this.csrf_token,width:180,height:90});new NIRIT.Upload({field:"square_logo",model:"Organization",token:this.csrf_token,width:60,height:60});$("#id_description").elastic();var b=new NIRIT.Company.Expertise();$("#id_expertise").hide().find("option").each(function(c){if(typeof($(this).attr("selected"))==="undefined"){$(this).remove()}else{b.addExpertiseToList({label:$(this).text(),value:$(this).val()})}});$("#expertise").keypress(NIRIT.utils.preventEnterSubmit);$("#expertise").autocomplete({minLength:0,source:function(c,d){$.ajax({url:"/api/expertise",data:{search:c.term},dataType:"json",success:function(e){var f=[];if(e.length<=0){f.push({label:$("#expertise").val(),value:"add"})}else{var h=true;for(var g in e){f.push({label:e[g]["title"],value:e[g]["id"]});if(e[g]["title"].toLowerCase()==$("#expertise").val().toLowerCase()){h=false}}if(h){f.push({label:$("#expertise").val(),value:"add"})}}d(f)}})},focus:function(c,d){$("#expertise").val(d.item.label);return false},select:function(d,e){$("#expertise").val(null);if(e.item.value=="add"){var c=e.item.label.split(/ +/);var g=[];for(var f in c){g.push(c[f].charAt(0).toUpperCase()+c[f].slice(1))}value=g.join(" ");$.ajax({url:"/api/expertise/add",data:{title:value},type:"POST",dataType:"json",success:function(h){b.addExpertise({label:h.title,value:h.id})},error:function(h){console.log("FAILED -- "+h)},headers:{Authorization:"Token "+a.token}})}else{b.addExpertise({label:e.item.label,value:e.item.value})}return false}})};NIRIT.Company.Expertise=function(){};NIRIT.Company.Expertise.prototype.addExpertise=function(a){this.addExpertiseToList(a);this.addExpertiseToSelect(a)};NIRIT.Company.Expertise.prototype.removeExpertise=function(a){$("#expertise_list").find("li").each(function(b){if(a.value==$(this).data("value")){$("#id_expertise").find("option").each(function(c){if(a.value==$(this).val()){$(this).remove()}});$(this).remove()}})};NIRIT.Company.Expertise.prototype.addExpertiseToList=function(c){var b=this;var e=[];$("#expertise_list").find("li").each(function(g){e.push($(this))});for(var f in e){if(c.value==e[f].data("value")){return false}}var d=$('<li class="expertise-item">');d.data("value",c.value);d.text(c.label);var a=$('<span class="remove">');a.click(function(g){b.removeExpertise(c)});d.append(a);$("#expertise_list").append(d)};NIRIT.Company.Expertise.prototype.addExpertiseToSelect=function(a){var c=[];$("#id_expertise").find("option").each(function(e){c.push($(this))});for(var d in c){if(a.value==c[d].val()){return false}}var b=$("<option>");b.attr("selected","selected");b.val(a.value);b.text(a.label);$("#id_expertise").append(b)};