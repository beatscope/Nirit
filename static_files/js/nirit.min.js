jQuery.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=jQuery.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};(function(a){jQuery.fn.extend({elastic:function(){var b=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){if(this.type!=="textarea"){return false}var g=jQuery(this),c=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),j=parseInt(g.css("line-height"),10)||parseInt(g.css("font-size"),"10"),l=parseInt(g.css("height"),10)||j*3,k=parseInt(g.css("max-height"),10)||Number.MAX_VALUE,d=0;if(k<0){k=Number.MAX_VALUE}c.appendTo(g.parent());var f=b.length;while(f--){c.css(b[f].toString(),g.css(b[f].toString()))}function h(){var i=Math.floor(parseInt(g.width(),10));if(c.width()!==i){c.css({width:i+"px"});e(true)}}function m(i,o){var n=Math.floor(parseInt(i,10));if(g.height()!==n){g.css({height:n+"px",overflow:o})}}function e(p){var o=g.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var i=c.html().replace(/<br>/ig,"<br />");if(p||o+"&nbsp;"!==i){c.html(o+"&nbsp;");if(Math.abs(c.height()+j-g.height())>3){var n=c.height()+j;if(n>=k){m(k,"auto")}else{if(n<=l){m(l,"hidden")}else{m(n,"hidden")}}}}}g.css({overflow:"hidden"});g.bind("keyup change cut paste",function(i){e()});a(window).bind("resize",h);g.bind("resize",h);g.bind("update",e);g.bind("input paste",function(i){setTimeout(e,250)});e()})}})})(jQuery);function csrfSafeMethod(a){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(a))}$.ajaxSetup({crossDomain:true,beforeSend:function(c,b){var a=$.cookie("csrftoken");if(!csrfSafeMethod(b.type)){c.setRequestHeader("X-CSRFToken",a);c.setRequestHeader("X-Requested-With","XMLHttpRequest")}}});function trim(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>=0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}if(typeof(NIRIT)==="undefined"){var NIRIT={}}if(!window.NIRIT){window.NIRIT=NIRIT}NIRIT.Utils=function(){};NIRIT.Utils.prototype.set_image_visibility=function(b,a){if(a){$("img."+b+"-edit").slideDown(250).show();$("#"+b+"_change").show()}else{$("img."+b+"-edit").slideUp(250).hide();$("#"+b+"_change").hide()}};NIRIT.Utils.prototype.preventEnterSubmit=function(c){if(c.which==13){var a=$(c.target);if(!a.is("textarea")&&!a.is(":button,:submit")){var b=false;$(this).find(":input:visible:not([disabled],[readonly]), a").each(function(){if(this===c.target){b=true}else{if(b){$(this).focus();return false}}});return false}}};NIRIT.Utils.prototype.set_member_preference=function(c,b,d){var a="/member/set-preference/"+c+"/"+b;$.get(a,function(e){if(typeof(d)==="function"){d(e)}})};NIRIT.utils=new NIRIT.Utils();NIRIT.Upload=function(c){this.field=c.field;this.model=c.model;this.token=c.token;if(c.hasOwnProperty("width")){this.width=c.width}else{this.width="auto"}if(c.hasOwnProperty("height")){this.height=c.height}else{this.height="auto"}var a=this;$("input#"+this.field+"-clear_id").change(function(){NIRIT.utils.set_image_visibility(a.field,!$(this).is(":checked"))});var b={csrfmiddlewaretoken:this.token,model:this.model,field:this.field};if(this.width!=="auto"){b.width=this.width}if(this.height!=="auto"){b.height=this.height}$("input#id_"+this.field).ajaxfileupload({action:"/upload",params:b,onComplete:function(f){if($("img."+a.field+"-edit").length>0){$("img."+a.field+"-edit").attr("src",f.filename)}else{var e=$("<img>");e.addClass(a.field+"-edit");e.attr("width",a.width);e.attr("height",a.height);e.attr("src",f.filename);$("input#id_"+a.field).before(e)}$("input#id_"+a.field+"_filepath").remove();var d=$("<input>");d.attr("type","hidden");d.val(f.filename);d.attr("name",a.field);d.attr("id","id_"+a.field+"_filepath");$("input#id_"+a.field).after(d);NIRIT.utils.set_image_visibility(a.field,true)},onStart:function(){if($("img."+a.field+"-edit").length>0){NIRIT.utils.set_image_visibility(a.field,false)}}})};$(document).ready(function(){(function(){if(!$.cookie("ck_allowed")){setTimeout(function(){$("#niritcookies").slideDown()},500);$("#cookies-continue-button").click(function(){$.cookie("ck_allowed",1,{expires:365,path:"/"});$("#niritcookies").slideUp()})}})()});