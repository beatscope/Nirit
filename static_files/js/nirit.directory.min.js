if(typeof(NIRIT)==="undefined"){var NIRIT={}}NIRIT.Directory=function(a){this.space=a.space;this.data=a.data;this.group=a.group;this.groups=this.data.results;this.add_cards()};NIRIT.Directory.prototype.add_cards=function(d){var a='<div class="counter"><span>'+this.data.count+"</span> ";a+=this.data.count>1?"companies":"company";a+=" listed.</div>";this.insert(a);for(var b in this.groups){var c=this.apply_template({label:this.groups[b]["label"],cards:this.groups[b]["results"]},this.group+"-group");this.insert(c);c=null}};NIRIT.Directory.prototype.insert=function(a,c,b){if(typeof(c)==="undefined"||c===null){c=$("#stream")}if(typeof(b)!=="undefined"&&b==true){c.prepend(a)}else{c.append(a)}};NIRIT.Directory.prototype.apply_template=function(b,g){var e="";switch(g){case"company":var d=(b.hasOwnProperty("building")&&typeof(b.building)!=="undefined")?b.building:null;var h=(b.hasOwnProperty("floor_tag")&&typeof(b.floor_tag)!=="undefined")?b.floor_tag:null;var f=NIRIT.STATIC_URL+"images/nirit-icon-32x32-grey.png";if(b.square_logo){f=b.square_logo}e+='<div class="company-item">';e+='<img src="'+f+'" alt="" width="32" height="32" />';e+='<div class="company-info">';e+='<div class="company-name"><a href="/company/'+b.slug+'" title="'+b.name+'">'+b.name+"</a></div>";if(d&&d!="N/A"&&this.group!="building"){e+='<div class="company-building">'+d+"</div>"}if(h&&h!="N/A"&&this.group!="floor"){e+='<div class="company-floor">'+h+" Floor</div>"}if(this.group!="department"){e+='<div class="company-department">'+b.department+"</div>"}e+='<div class="company-expertise">'+b.expertise.join(", ")+"</div>";e+="</div>";e+="</div>";break;default:e+='<div class="card">';e+="<h3>"+b.label+"</h3>";for(var i in b.cards){var a=this.apply_template(b.cards[i],"company");e+=a;a=null}e+="</div>";break}return e};