{% extends "nirit/base.html" %}

{% load i18n adminmedia %}
{% load url from future %}

{% block title %}{% trans 'Password change' %}{% endblock %}

{% block content %}
<div class="content doublepadded">
    <h1>{% trans 'Password change' %}</h1>
    <p>{% trans "Please enter your old password, for security's sake, and then enter your new password twice so we can verify you typed it in correctly." %}</p>
    <div id="login-card">
        <form action="" method="post">
            {% csrf_token %}
            {% if form.errors %}
            <div id="form-errors">
                {% if form.old_password.errors %}
                    <p><strong>Old password</strong> is required.</p>
                {% elif form.new_password1.errors %}
                    <p><strong>New password</strong> is required.</p>
                {% else %}
                    <p>The two password fields didn't match.</p>
                {% endif %}
            </div>
            {% endif %}
            <div class="form-field">
                <label for="id_old_password" class="required">{% trans 'Old password' %}:</label>{{ form.old_password }}
            </div>
            <div class="form-field">
                <label for="id_new_password1" class="required">{% trans 'New password' %}:</label>{{ form.new_password1 }}
            </div>
            <div class="form-field">
                <label for="id_new_password2" class="required">{% trans 'Password (again)' %}:</label>{{ form.new_password2 }}
            </div>
            <input type="submit" value="{% trans 'Change my password' %}" class="default" />
        </form>
    </div>
</div>
{% endblock %}

{% block extrajs %}{{ super }}
<script type="text/javascript">
    $(document).ready(function () {
        $('#id_old_password').focus();
        $('#form-errors').bind('click', function () {
            $(this).hide();
            $('#id_old_password').focus();
        });
        setTimeout(function () {
            $('#form-errors').fadeOut();
        }, 2000);
    });
</script>
{% endblock %}
