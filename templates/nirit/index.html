{% extends "nirit/base.html" %}
{% load i18n %}
{% load building_card %}

{% block content %}
<div class="content index edit">

    {% if user.is_anonymous %}
        <div id="login-card">
            {% if form.errors %}
            <div id="form-errors">
                <p>Your email and password didn't match. Please try again.</p>
            </div>
            {% endif %}
            <form method="post" action="">
                {% csrf_token %}
                <div class="form-field"><label>Email Address</label>{{ form.username }}</div>
                <div class="form-field"><label>{{ form.password.label_tag }}</label>{{ form.password }}</div>
                <input type="hidden" name="next" value="{{ next }}" />
                <ul id="login-links">
                    <li><a href="/member/password/reset/">forgot password</a></li>
                    <li><a href="/what-is-nirit">what's Nirit</a></li>
                    <li><a href="/member/sign-up">sign-up</a></li>
                    <li><input type="submit" class="button" value="login" /></li>
                </ul>
            </form>
        </div>
    {% endif %}

    {% for building in buildings %}
        {% building_card building %}
    {% endfor %}

</div>
{% endblock %}

{% block extrajs %}{{ block.super }}
<script type="text/javascript">
    $(document).ready(function () {
        $('#id_username').focus();
        $('#form-errors').bind('click', function () {
            $(this).hide();
            $('#id_username').focus();
        });
        setTimeout(function () {
            $('#form-errors').fadeOut();
            $('#id_username').focus();
        }, 2000);
    });
</script>
{% endblock %}
